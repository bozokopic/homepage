<%inherit file="_main.html"/>

<%
from pathlib import Path
import collections

entries = collections.deque()

for entry in sorted((i for i in conf['entries'] if 'published' in i),
                    reverse=True,
                    key=lambda i: i['published']):
    if not entry['src'].startswith('articles/'):
        continue

    href = str(Path(entry['src']).with_suffix('.html'))
    published = entry['published'].split('T', 1)[0]
    label = f"{published} - {entry['title']}"
    if 'updated' in entry:
        updated = entry['updated'].split('T', 1)[0]
        label += f" (updated {updated})"

    entries.append((href, label))
%>

<ul>
% for href, label in entries:
    <li>
        <a href="${href}">${label}</a>
    </li>
% endfor
</ul>
